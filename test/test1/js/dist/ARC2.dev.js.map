{"version":3,"sources":["ARC2.js"],"names":["calculateChecksum","arcNumber","areaCodeMap","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","firstChar","charAt","secondChar","areaCode","genderCode","firstPart","Math","floor","digits","substr","secondPart","i","parseInt","sum","checksum","oldnew","calculateARCChecksum","cleanedInput","trim","enteredChecksum","length","expectedChecksum","correctArcNumber"],"mappings":"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","sourcesContent":["export function calculateChecksum(arcNumber) {\r\n    const areaCodeMap = {\r\n        A: 10, B: 11, C: 12, D: 13, E: 14,\r\n        F: 15, G: 16, H: 17, I: 34, J: 18,\r\n        K: 19, L: 20, M: 21, N: 22, O: 35,\r\n        P: 23, Q: 24, R: 25, S: 26, T: 27,\r\n        U: 28, V: 29, W: 32, X: 30, Y: 31, Z: 33\r\n    };\r\n\r\n    const firstChar = arcNumber.charAt(0);\r\n    const secondChar = arcNumber.charAt(1);\r\n    const areaCode = areaCodeMap[firstChar];\r\n    const genderCode = areaCodeMap[secondChar];\r\n\r\n    let firstPart;\r\n    if (secondChar === 'A' || secondChar === 'B' || secondChar === 'C' || secondChar === 'D') {\r\n        firstPart = Math.floor(areaCode / 10) * 1 + (areaCode * 9) % 10 + (genderCode % 10) * 8;\r\n        const digits = arcNumber.substr(2);\r\n        let secondPart = 0;\r\n        for (let i = 0; i < 7; i++) {\r\n            secondPart += parseInt(digits.charAt(i)) * (7 - i);\r\n        }\r\n\r\n        const sum = firstPart + secondPart;\r\n        const checksum = 10 - (sum % 10);\r\n        oldnew = 1;\r\n        return checksum;\r\n    } else {\r\n        firstPart = Math.floor(areaCode / 10) * 1 + (areaCode * 9) % 10;\r\n        const digits = arcNumber.substr(1);\r\n        let secondPart = 0;\r\n        for (let i = 0; i < 8; i++) {\r\n            secondPart += parseInt(digits.charAt(i)) * (8 - i);\r\n        }\r\n\r\n        const sum = firstPart + secondPart;\r\n        const checksum = 10 - (sum % 10);\r\n        return checksum;\r\n    }       \r\n}\r\n\r\nlet oldnew = 0;\r\n\r\nexport function calculateARCChecksum(arcNumber) {\r\n    const cleanedInput = arcNumber.trim();\r\n    const enteredChecksum = parseInt(cleanedInput.charAt(cleanedInput.length - 1), 10); // 使用者輸入的檢查碼\r\n    const expectedChecksum = calculateChecksum(cleanedInput.substr(0, cleanedInput.length - 1)); // 預期的檢查碼\r\n\r\n    if (enteredChecksum === expectedChecksum) {\r\n        if(oldnew === 0)\r\n        {\r\n            return `新式居留證號碼 ${cleanedInput} 的檢查碼正確：${enteredChecksum}`;\r\n        }\r\n        else\r\n        {\r\n            oldnew=0;\r\n            return `舊式居留證號碼 ${cleanedInput} 的檢查碼正確：${enteredChecksum}`;\r\n        }\r\n        \r\n    } else {\r\n        const correctArcNumber = cleanedInput.substr(0, cleanedInput.length - 1) + expectedChecksum;\r\n        return `您輸入的檢查碼 ${enteredChecksum} 錯誤，正確的檢查碼應為 ${expectedChecksum}。重新計算後的居留證號碼：${correctArcNumber}`;\r\n    }\r\n}"],"file":"ARC2.dev.js"}