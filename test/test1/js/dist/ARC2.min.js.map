{"version":3,"sources":["ARC2.js"],"names":["calculateChecksum","arcNumber","firstPart","areaCodeMap","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","charAt","secondChar","areaCode","firstChar","genderCode","Math","floor","digits","substr","secondPart","i","parseInt","oldnew","calculateARCChecksum","trim","cleanedInput","length","enteredChecksum","expectedChecksum","concat","checksum","correctArcNumber"],"mappings":"aAAO,SAASA,kBAAkBC,GAC9B,IACmCC,EAD7BC,EAAc,CAChBC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAC/BC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAC/BC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAC/BC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAC/BC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,IALpC1B,EAAcF,EAAA6B,OAAA,GAAAC,EAAA9B,EAAA6B,OAAA,GAAAE,EAAA7B,EAAA8B,GAAAC,EAAA/B,EAAA4B,GAEhBtB,GAFgB,MAEbsB,GAFa,MAAAA,GAAA,MAAAA,GAAA,MAAAA,EAAA,CAEN7B,EAFM,EAAAiC,KAAAC,MAAAJ,EAAA,IAAA,EAAAA,EAAA,GAAAE,EAAA,GAAA,EAEe,IAAd,IAFDG,EAAApC,EAAAqC,OAAA,GAAAC,EAAA,EAAAC,EAAA,EAAAA,EAAA,EAAAA,IAAAD,GAAAE,SAAAJ,EAAAP,OAAAU,KAAA,EAAAA,GAIN,OAAPE,OAJa,EAAA,IAAAxC,EAAAqC,GAAA,GAIQrC,EAJR,EAAAiC,KAAAC,MAAAJ,EAAA,IAAA,EAAAA,EAAA,GAKN,IADqB,IAJfK,EAAApC,EAAAqC,OAAA,GAAAC,EAAA,EAAAC,EAAA,EAAAA,EAAA,EAAAA,IAAAD,GAAAE,SAAAJ,EAAAP,OAAAU,KAAA,EAAAA,GAQdP,OARN,IAK0C/B,EAAAqC,GAL1C,wJAaA,IAAAG,OAAIxC,EACA6B,SAAUY,qBAAYZ,GACtB7B,IAAAA,EAAiBkC,EAAcQ,OACzBP,EAAmBC,SAAzBO,EAAAf,OAAAe,EAAAC,OAAA,GAAA,IACIP,EAAJvC,kBAAA6C,EAAAP,OAAA,EAAAO,EAAAC,OAAA,IACA,GAAAC,IAAwBC,EACpBT,OAAcE,IAAdF,OA+BA,WAAAU,OAAkBJ,EAAlB,YAAAI,OAAyCF,IAzBtCG,OAAP,EACG,WAAAD,OAAAJ,EAAA,YAAAI,OAAAF,IAiCH,IAAMI,EAAmBN,EAAaP,OAAO,EAAGO,EAAaC,OAAS,GAAKE,EA9BvET,MAAAA,WAAAA,OAAJQ,EAAIR,iBAAAA,OAAJS,EAAIT,iBAAAA,OAAJY","file":"ARC2.min.js","sourcesContent":["export function calculateChecksum(arcNumber) {\r\n    const areaCodeMap = {\r\n        A: 10, B: 11, C: 12, D: 13, E: 14,\r\n        F: 15, G: 16, H: 17, I: 34, J: 18,\r\n        K: 19, L: 20, M: 21, N: 22, O: 35,\r\n        P: 23, Q: 24, R: 25, S: 26, T: 27,\r\n        U: 28, V: 29, W: 32, X: 30, Y: 31, Z: 33\r\n    };\r\n\r\n    const firstChar = arcNumber.charAt(0);\r\n    const secondChar = arcNumber.charAt(1);\r\n    const areaCode = areaCodeMap[firstChar];\r\n    const genderCode = areaCodeMap[secondChar];\r\n\r\n    let firstPart;\r\n    if (secondChar === 'A' || secondChar === 'B' || secondChar === 'C' || secondChar === 'D') {\r\n        firstPart = Math.floor(areaCode / 10) * 1 + (areaCode * 9) % 10 + (genderCode % 10) * 8;\r\n        const digits = arcNumber.substr(2);\r\n        let secondPart = 0;\r\n        for (let i = 0; i < 7; i++) {\r\n            secondPart += parseInt(digits.charAt(i)) * (7 - i);\r\n        }\r\n\r\n        const sum = firstPart + secondPart;\r\n        const checksum = 10 - (sum % 10);\r\n        oldnew = 1;\r\n        return checksum;\r\n    } else {\r\n        firstPart = Math.floor(areaCode / 10) * 1 + (areaCode * 9) % 10;\r\n        const digits = arcNumber.substr(1);\r\n        let secondPart = 0;\r\n        for (let i = 0; i < 8; i++) {\r\n            secondPart += parseInt(digits.charAt(i)) * (8 - i);\r\n        }\r\n\r\n        const sum = firstPart + secondPart;\r\n        const checksum = 10 - (sum % 10);\r\n        return checksum;\r\n    }       \r\n}\r\n\r\nlet oldnew = 0;\r\n\r\nexport function calculateARCChecksum(arcNumber) {\r\n    const cleanedInput = arcNumber.trim();\r\n    const enteredChecksum = parseInt(cleanedInput.charAt(cleanedInput.length - 1), 10); // 使用者輸入的檢查碼\r\n    const expectedChecksum = calculateChecksum(cleanedInput.substr(0, cleanedInput.length - 1)); // 預期的檢查碼\r\n\r\n    if (enteredChecksum === expectedChecksum) {\r\n        if(oldnew === 0)\r\n        {\r\n            return `新式居留證號碼 ${cleanedInput} 的檢查碼正確：${enteredChecksum}`;\r\n        }\r\n        else\r\n        {\r\n            oldnew=0;\r\n            return `舊式居留證號碼 ${cleanedInput} 的檢查碼正確：${enteredChecksum}`;\r\n        }\r\n        \r\n    } else {\r\n        const correctArcNumber = cleanedInput.substr(0, cleanedInput.length - 1) + expectedChecksum;\r\n        return `您輸入的檢查碼 ${enteredChecksum} 錯誤，正確的檢查碼應為 ${expectedChecksum}。重新計算後的居留證號碼：${correctArcNumber}`;\r\n    }\r\n}"]}